var browserHeight=document.documentElement.clientHeight||document.body.clientHeight,scrollTop=document.documentElement.scrollTop||document.body.scrollTop,g_FlyPig={};function FigureHover(i){if($("[copyFlag]").removeAttr("copyFlag"),$(i).find(".code").attr("copyFlag",1),$copyBtn=$("#copyBtn"),0!=$copyBtn.length){function t(i){var t=i.getBoundingClientRect(),e=t.top>0?t.top:0;e=e<t.bottom-$copyBtn.height()?e:t.bottom-$copyBtn.height(),$copyBtn.css("top",e+6),$copyBtn.css("left",t.left-$copyBtn.width()-3)}$copyBtn.stop(),$copyBtn.css("opacity",.8),$copyBtn.css("display","block"),t(i),resizePos(i,t)}if(1!=$(i).attr("block")){var e=$(i).find(".code")[0],o=e.clientWidth,n=e.scrollWidth,s=-parseInt($(i).css("marginRight"));$codePinBtn=$(i).find(".codePinBtn");var c=n-(o-s);if(c>0){$(i).stop(),$codePinBtn.stop();var a=($("#main").width()-$(".main-inner").width())/2-10;a>0&&(s=c<a?c:.8*a,$(i).animate({marginRight:-s}),$codePinBtn.animate({opacity:1}))}}}function FigureHoverOut(i){if($("#copyBtn").animate({opacity:0},2e3),1!=$(i).attr("block")){$(i).stop(),$(i).animate({marginRight:"0"});var t=$(i).find(".codePinBtn");t.stop(),t.css({opacity:0})}}function createCopyBtns(){var i=$("figure .figcode");if(i.length>0&&($(".post-body").before('<div id="copyBtn" ><span id="imgCopy" ><i class="fa fa-paste fa-fw"></i></span><span id="imgSuccess" style="display: none;color: #6FB76F;"><i class="fa fa-check-circle fa-fw" aria-hidden="true"></i></span>'),i.append('<div class="codePinBtn"><img id="imgSuccess" src="/images/png/Pin_green.png" style="border:none; width: 24px;"></div>')),$("figure .code").length>0){var t=new Clipboard("#copyBtn",{target:function(){var i=(t=document.querySelector("[copyFlag]")).querySelector(".diff-deletion");if(null!=i){var t,e=t.querySelector("pre").cloneNode(!0);for(i=e.querySelector(".diff-deletion");null!=i;)e.removeChild(i),i=e.querySelector(".diff-deletion");null==(t=document.getElementById("tmpcopy"))&&((t=document.createElement("div")).id="tmpcopy",t.style.position="fixed",t.style.width="0",t.style.height="0",document.body.appendChild(t)),t.innerHTML="",t.appendChild(e)}return t},isSupported:function(){return alert(this.support),document.querySelector("[copyFlag]")}});t.on("success",function(i){i.clearSelection(),$imgOK=$("#copyBtn").find("#imgSuccess"),"none"==$imgOK.css("display")&&($imgOK.css({opacity:0,display:"block"}),$imgOK.animate({opacity:1},1e3),setTimeout(function(){$imgOK.animate({opacity:0},2e3)},2e3),setTimeout(function(){$imgOK.css("display","none")},4e3));var t=document.getElementById("tmpcopy");null!=t&&(t.innerHTML="")}),t.on("error",function(i){console.error("Action:",i.action),console.error("Trigger:",i.trigger)}),$("#copyBtn").hover(function(){$(this).stop(),$(this).css("opacity",1)},function(){$(this).animate({opacity:0},2e3)})}}function btnPinClick(){var i=this.parentElement.parentElement;1!=$(i).attr("block")?($(".post-body").css("transform","none"),BindScrollTo($(i).find(".code")[0]),$(i).attr("block",1),$(this).find("img").attr("src","/images/png/Pin_red.png")):(UnBindScroll(),$(i).attr("block",0),$(this).find("img").attr("src","/images/png/Pin_green.png"))}!function(){window.FlyPig=function(i,t,e,o){var n=0,s=0,c=document.getElementById(i),a=c.getContext("2d"),r=new Image;r.src=t;var d=[],l=(e=e>0?e:25,c.width+e);function p(){a.clearRect(0,0,c.width,c.height);for(var i=0,t=d.length;i<t;i++)a.restore(),d[i].x+=.1*d[i].size,a.drawImage(r,d[i].x%l-e,d[i].y+20*Math.sin(d[i].x/100),d[i].size,d[i].size)}!function(){for(var i=i>0?i:15,t=c.height-e,o=0;o<i;o++)d.push({size:Math.random()*e,y:Math.random()*t,x:Math.random()*l});d.sort(function(i,t){return i.size-t.size})}(),this.start=function(){s>0&&(window.clearInterval(s),s=0),0==n&&(n=setInterval(p,1e3/60))},this.stop=function(){0==s&&(s=setTimeout(function(){window.clearInterval(n),n=0},3e3))}}}(),$("figure").hover(function(){FigureHover(this),1==$(this).attr("block")&&BindScrollTo($(this).find(".code")[0])},function(){FigureHoverOut(this),UnBindScroll()}),$("figure").unbind("dblclick").bind("dblclick",function(){1!=$(this).attr("block")?($(".post-body").css("transform","none"),BindScrollTo($(this).find(".code")[0]),$(this).attr("block",1),$(this).find(".codePinBtn img").attr("src","/images/png/Pin_red.png")):(UnBindScroll(),$(this).attr("block",0),$(this).find(".codePinBtn img").attr("src","/images/png/Pin_green.png"))}),$(window).resize(function(){var i=($("#main").width()-$(".main-inner").width())/2-10;$copyBtn=$("#copyBtn"),i<$copyBtn.width()?$copyBtn.css("display","none"):$copyBtn.css("display","block"),$("figure[block='1']").each(function(){if(1==$(this).attr("block")){var t=$(this).width(),e=$(this)[0].scrollWidth,o=-parseInt($(this).css("marginRight")),n=e-(t-o);n>0&&i>0&&(o=n<i?n:.8*i,$(this).css({marginRight:-o}),$(this).find(".codePinBtn").animate({opacity:1,left:$(".post-body")[0].getBoundingClientRect().right+o-$(this).find(".codePinBtn").width()}))}})}),$(document).on("sidebar.isShowing",function(){NexT.utils.isDesktop&&($sidebar_background=$(".sidebar-background"),0==$sidebar_background.length&&$(".sidebar-inner").before('<div class="sidebar-background"></div>'),$(".sidebar-inner").css("display","block"),localStorage.sidebar_show=1,setTimeout("$('.customFlipClock').css('visibility','visible')",200))}).on("sidebar.isHiding",function(){NexT.utils.isDesktop&&(localStorage.sidebar_show=0,$(".sidebar-inner").css("display","none"),$(".customFlipClock").css("visibility","hidden"))}),$(document).ready(function(){localStorage.sidebar_show?1==Number(localStorage.sidebar_show)?NexT.utils.displaySidebar():localStorage.sidebar_show=0:NexT.utils.displaySidebar(),g_FlyPig=new FlyPig("sidebar-author","/images/pig.png"),createCopyBtns(),$(".codePinBtn").unbind("click").bind("click",btnPinClick),$(".header-inner").animate({padding:"25px 0 25px"},1e3),null==navigator.userAgent.match(/mobile/i)&&($("#header").wobbleWindow({radius:50,movementTop:!1,offsetX:50,debug:!1}),$("blockquote").wobbleWindow({radius:40,movementTop:!1,movementBottom:!1,lineColor:"",debug:!1}),$("#footer").wobbleWindow({radius:50,movementBottom:!1,offsetX:50,position:"absolute",debug:!1}),$("#reward").wobbleWindow({radius:40,offsetX:0,offsetY:5,bodyColor:"#FAF2C7",lineColor:"",debug:!1})),$(".footer-inner .fa-heart").addClass("fa-"+getBrowser().toLowerCase())}),$(".sidebar, .sidebar-toggle").hover(function(){g_FlyPig.start(),$("#sidebarClock").css("opacity","1"),$("canvas#sidebar-author").stop(),$("canvas#sidebar-author").animate({opacity:1},1e3),$(".sidebar-background").css("opacity","0.15"),$(".sidebar, .sidebar-toggle").css("opacity","1")},function(){$("#sidebarClock").css("opacity","0"),$("canvas#sidebar-author").stop(),$("canvas#sidebar-author").animate({opacity:0},1e3),$(".sidebar-background").css("opacity","0"),$(".sidebar, .sidebar-toggle").css("opacity","0.98"),g_FlyPig.stop()});